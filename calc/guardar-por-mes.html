<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Quanto guardar por mês | FinHub</title>
  <meta name="description" content="Meta financeira: descubra quanto guardar por mês para atingir um objetivo no prazo."/>
  <link rel="stylesheet" href="../assets/style.css"/>
  <link rel="icon" href="../assets/favicon.svg" type="image/svg+xml"/>
</head>
<body>
<header class="nav">
  <div class="container navInner">
    <a class="brand" href="../index.html"><div class="logo"></div><span>FinHub</span></a>
    <nav class="navLinks">
      <a class="pill" href="../calculadoras.html">Calculadoras</a>
      <a class="pill" href="../tabelas.html">Tabelas</a>
      <a class="pill" href="../faq.html">FAQ</a>
      <a class="pill" href="../sobre.html">Sobre</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="card"><div class="cardPad">
      <h1 class="h1">Quanto guardar por mês</h1>
      <p class="p">Você coloca meta, prazo e taxa. O site te devolve o aporte mensal estimado. Sem papo motivacional.</p>
    </div></div>
  </section>

  <section class="grid" style="margin-top:14px">
    <div class="col8">
      <div class="card"><div class="cardPad">
        <h2 class="h2">Parâmetros</h2>

        <form class="form" id="form">
          <div class="grid">
            <div class="col6 field">
              <label for="meta">Meta (R$)</label>
              <input id="meta" inputmode="decimal" value="10000" placeholder="Ex: 10.000,00">
            </div>
            <div class="col6 field">
              <label for="inicial">Valor inicial (R$)</label>
              <input id="inicial" inputmode="decimal" value="0" placeholder="Ex: 1.000,00">
            </div>
            <div class="col6 field">
              <label for="taxa">Taxa mensal (%)</label>
              <input id="taxa" inputmode="decimal" value="1" placeholder="Ex: 1,0">
            </div>
            <div class="col6 field">
              <label for="meses">Prazo (meses)</label>
              <input id="meses" inputmode="numeric" value="24" placeholder="Ex: 24">
            </div>
          </div>

          <div class="btnRow">
            <button class="btn primary" type="submit">Calcular</button>
            <button class="btn" type="button" id="reset">Reset</button>
          </div>
        </form>

        <div style="height:12px"></div>
        <div class="result" id="out" aria-live="polite">
          <div class="big">—</div>
          <div class="sub">Preencha os campos e clique em calcular.</div>
        </div>

        <div style="height:12px"></div>
        <div class="notice">
          Fórmula usada: valor futuro com aportes mensais (anuidade). No mundo real, taxas variam e existem custos.
        </div>
      </div></div>
    </div>

    <div class="col4">
      <div class="ad"><b>Slot de anúncio</b><br/>Lateral.</div>
      <div style="height:12px"></div>
      <div class="card"><div class="cardPad">
        <h2 class="h2">Relacionado</h2>
        <div class="btnRow">
          <a class="btn" href="juros-compostos.html">Juros compostos</a>
          <a class="btn" href="parcelamento.html">Parcelamento</a>
        </div>
      </div></div>
    </div>
  </section>

  <footer class="footer">
    <div class="footerGrid">
      <div><b>FinHub</b><br/><small><a href="../privacidade.html">Privacidade</a> · <a href="../termos.html">Termos</a></small></div>
      <div style="text-align:right"><small><a href="../calculadoras.html">Voltar</a></small></div>
    </div>
  </footer>
</main>

<script type="module">
  import { $, toNumberBR, formatBRL, setActiveNav, clamp } from "../assets/app.js";
  setActiveNav();

  const metaEl = $("#meta");
  const inicialEl = $("#inicial");
  const taxaEl = $("#taxa");
  const mesesEl = $("#meses");
  const out = $("#out");

  function calc(){
    const meta = toNumberBR(metaEl.value);
    const inicial = toNumberBR(inicialEl.value);
    const taxaPct = toNumberBR(taxaEl.value);
    const meses = Math.round(toNumberBR(mesesEl.value));
    if (![meta, inicial, taxaPct, meses].every(Number.isFinite)){
      out.innerHTML = `<div class="big">—</div><div class="sub">Preencha tudo com números válidos.</div>`;
      return;
    }
    const i = taxaPct/100;
    const n = clamp(meses, 1, 600);

    // FV = PV*(1+i)^n + PMT * [((1+i)^n - 1)/i]
    // Resolver PMT: PMT = (FV - PV*(1+i)^n) * i / ((1+i)^n - 1)
    const pow = Math.pow(1+i, n);
    let pmt;
    if (i === 0){
      pmt = (meta - inicial) / n;
    }else{
      const denom = (pow - 1);
      pmt = (meta - inicial*pow) * i / denom;
    }

    out.innerHTML = `
      <div class="big">${formatBRL(pmt)}</div>
      <div class="sub">
        Aporte mensal estimado para atingir <b>${formatBRL(meta)}</b> em <b>${n}</b> meses
        (taxa <b>${taxaPct.toLocaleString("pt-BR")}%</b> ao mês, inicial <b>${formatBRL(inicial)}</b>).
      </div>
    `;
  }

  $("#form").addEventListener("submit", (e)=>{ e.preventDefault(); calc(); });
  $("#reset").addEventListener("click", ()=>{
    metaEl.value="10000"; inicialEl.value="0"; taxaEl.value="1"; mesesEl.value="24";
    calc();
  });
  calc();
</script>
</body>
</html>
