<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Juros compostos com aporte | FinHub</title>
  <meta name="description" content="Simule juros compostos com aporte mensal. Veja saldo final e evolução."/>
  <link rel="stylesheet" href="../assets/style.css"/>
  <link rel="icon" href="../assets/favicon.svg" type="image/svg+xml"/>
</head>
<body>
<header class="nav">
  <div class="container navInner">
    <a class="brand" href="../index.html"><div class="logo"></div><span>FinHub</span></a>
    <nav class="navLinks">
      <a class="pill" href="../calculadoras.html">Calculadoras</a>
      <a class="pill" href="../tabelas.html">Tabelas</a>
      <a class="pill" href="../faq.html">FAQ</a>
      <a class="pill" href="../sobre.html">Sobre</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="card"><div class="cardPad">
      <h1 class="h1">Juros compostos com aporte</h1>
      <p class="p">Simule o crescimento do seu dinheiro com taxa mensal e aportes. Bom pra quem quer parar de “achar” e começar a ver número.</p>
    </div></div>
  </section>

  <section class="grid" style="margin-top:14px">
    <div class="col8">
      <div class="card"><div class="cardPad">
        <h2 class="h2">Parâmetros</h2>

        <form class="form" id="form">
          <div class="grid">
            <div class="col6 field">
              <label for="inicial">Valor inicial (R$)</label>
              <input id="inicial" inputmode="decimal" placeholder="Ex: 1.000,00" value="1000">
            </div>
            <div class="col6 field">
              <label for="aporte">Aporte mensal (R$)</label>
              <input id="aporte" inputmode="decimal" placeholder="Ex: 500,00" value="500">
            </div>
            <div class="col6 field">
              <label for="taxa">Taxa mensal (%)</label>
              <input id="taxa" inputmode="decimal" placeholder="Ex: 1,0" value="1">
              <div class="help">Dica: 1% ao mês ≈ 12,68% ao ano (aprox.).</div>
            </div>
            <div class="col6 field">
              <label for="meses">Período (meses)</label>
              <input id="meses" inputmode="numeric" placeholder="Ex: 24" value="24">
            </div>
          </div>

          <div class="btnRow">
            <button class="btn primary" type="submit">Calcular</button>
            <button class="btn" type="button" id="reset">Reset</button>
            <button class="btn good" type="button" id="share">Copiar link</button>
          </div>
        </form>

        <div style="height:12px"></div>
        <div class="result" id="out" aria-live="polite">
          <div class="big">—</div>
          <div class="sub">Preencha os campos e clique em calcular.</div>
        </div>

        <div style="height:12px"></div>
        <div class="notice">
          Sem conselho financeiro. Isso é matemática básica aplicada. As taxas do mundo real variam, impostos existem, e o universo não liga.
        </div>

      </div></div>
    </div>

    <div class="col4">
      <div class="ad"><b>Slot de anúncio</b><br/>Lateral. Mantém a ferramenta limpa.</div>
      <div style="height:12px"></div>

      <div class="card"><div class="cardPad">
        <h2 class="h2">Próximos passos</h2>
        <p class="p">Se curtiu essa simulação, essas outras fecham o ciclo:</p>
        <div class="btnRow">
          <a class="btn" href="guardar-por-mes.html">Guardar por mês</a>
          <a class="btn" href="parcelamento.html">Parcelamento</a>
          <a class="btn" href="comparar-opcoes.html">Comparar opções</a>
        </div>
      </div></div>
    </div>

    <div class="col12">
      <div class="ad"><b>Slot de anúncio (rodapé da página)</b><br/>Bom pra exibição sem atrapalhar.</div>
    </div>
  </section>

  <footer class="footer">
    <div class="footerGrid">
      <div><b>FinHub</b><br/><small><a href="../privacidade.html">Privacidade</a> · <a href="../termos.html">Termos</a></small></div>
      <div style="text-align:right"><small><a href="../calculadoras.html">Voltar</a></small></div>
    </div>
  </footer>
</main>

<script type="module">
  import { $, toNumberBR, formatBRL, setActiveNav, onCopyLink, clamp } from "../assets/app.js";
  setActiveNav();

  const elInicial = $("#inicial");
  const elAporte  = $("#aporte");
  const elTaxa    = $("#taxa");
  const elMeses   = $("#meses");
  const out = $("#out");
  const form = $("#form");

  function calc(){
    const inicial = toNumberBR(elInicial.value);
    const aporte  = toNumberBR(elAporte.value);
    const taxaPct = toNumberBR(elTaxa.value);
    const meses   = Math.round(toNumberBR(elMeses.value));

    const i = (taxaPct/100);
    const n = clamp(meses, 1, 600);

    if (![inicial, aporte, taxaPct, meses].every(Number.isFinite)){
      out.innerHTML = `<div class="big">—</div><div class="sub">Preencha tudo com números válidos.</div>`;
      return;
    }

    let saldo = inicial;
    for (let m=1; m<=n; m++){
      saldo = saldo * (1+i) + aporte;
    }

    const aportado = inicial + aporte * n;
    const ganho = saldo - aportado;

    out.innerHTML = `
      <div class="big">${formatBRL(saldo)}</div>
      <div class="sub">
        Total aportado: <b>${formatBRL(aportado)}</b><br/>
        Ganho estimado (juros): <b>${formatBRL(ganho)}</b><br/>
        Período: <b>${n}</b> meses | Taxa: <b>${taxaPct.toLocaleString("pt-BR")}%</b> ao mês
      </div>
    `;
  }

  form.addEventListener("submit", (e)=>{ e.preventDefault(); calc(); });

  $("#reset").addEventListener("click", ()=>{
    elInicial.value="1000"; elAporte.value="500"; elTaxa.value="1"; elMeses.value="24";
    calc();
  });

  // Link compartilhável via querystring
  function currentLink(){
    const params = new URLSearchParams({
      inicial: elInicial.value,
      aporte: elAporte.value,
      taxa: elTaxa.value,
      meses: elMeses.value
    });
    return `${location.origin}${location.pathname}?${params.toString()}`;
  }
  onCopyLink("#share", currentLink);

  // carregar parâmetros se existirem
  const p = new URLSearchParams(location.search);
  if (p.has("inicial")) elInicial.value = p.get("inicial");
  if (p.has("aporte"))  elAporte.value  = p.get("aporte");
  if (p.has("taxa"))    elTaxa.value    = p.get("taxa");
  if (p.has("meses"))   elMeses.value   = p.get("meses");
  calc();
</script>
</body>
</html>
