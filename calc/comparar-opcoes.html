<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Comparar opções | FinHub</title>
  <meta name="description" content="Compare duas opções de taxa/rendimento e veja diferença no saldo final."/>
  <link rel="stylesheet" href="../assets/style.css"/>
  <link rel="icon" href="../assets/favicon.svg" type="image/svg+xml"/>
</head>
<body>
<header class="nav">
  <div class="container navInner">
    <a class="brand" href="../index.html"><div class="logo"></div><span>FinHub</span></a>
    <nav class="navLinks">
      <a class="pill" href="../calculadoras.html">Calculadoras</a>
      <a class="pill" href="../tabelas.html">Tabelas</a>
      <a class="pill" href="../faq.html">FAQ</a>
      <a class="pill" href="../sobre.html">Sobre</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="card"><div class="cardPad">
      <h1 class="h1">Comparar duas opções</h1>
      <p class="p">Mesma grana, mesma duração. Duas taxas diferentes. Quem ganha e por quanto.</p>
    </div></div>
  </section>

  <section class="grid" style="margin-top:14px">
    <div class="col8">
      <div class="card"><div class="cardPad">
        <h2 class="h2">Parâmetros</h2>

        <form class="form" id="form">
          <div class="grid">
            <div class="col6 field">
              <label for="inicial">Valor inicial (R$)</label>
              <input id="inicial" inputmode="decimal" value="2000">
            </div>
            <div class="col6 field">
              <label for="aporte">Aporte mensal (R$)</label>
              <input id="aporte" inputmode="decimal" value="300">
            </div>

            <div class="col6 field">
              <label for="taxaA">Taxa opção A (% a.m.)</label>
              <input id="taxaA" inputmode="decimal" value="1">
            </div>
            <div class="col6 field">
              <label for="taxaB">Taxa opção B (% a.m.)</label>
              <input id="taxaB" inputmode="decimal" value="0,8">
            </div>

            <div class="col6 field">
              <label for="meses">Período (meses)</label>
              <input id="meses" inputmode="numeric" value="24">
            </div>
          </div>

          <div class="btnRow">
            <button class="btn primary" type="submit">Comparar</button>
            <button class="btn" type="button" id="reset">Reset</button>
          </div>
        </form>

        <div style="height:12px"></div>
        <div class="result" id="out" aria-live="polite">
          <div class="big">—</div>
          <div class="sub">Preencha os campos e clique em comparar.</div>
        </div>
      </div></div>
    </div>

    <div class="col4">
      <div class="ad"><b>Slot de anúncio</b><br/>Lateral.</div>
    </div>
  </section>

  <footer class="footer">
    <div class="footerGrid">
      <div><b>FinHub</b><br/><small><a href="../privacidade.html">Privacidade</a> · <a href="../termos.html">Termos</a></small></div>
      <div style="text-align:right"><small><a href="../calculadoras.html">Voltar</a></small></div>
    </div>
  </footer>
</main>

<script type="module">
  import { $, toNumberBR, formatBRL, setActiveNav, clamp } from "../assets/app.js";
  setActiveNav();

  const inicialEl = $("#inicial");
  const aporteEl = $("#aporte");
  const taxaAEl = $("#taxaA");
  const taxaBEl = $("#taxaB");
  const mesesEl = $("#meses");
  const out = $("#out");

  function simular(inicial, aporte, taxaPct, meses){
    const i = taxaPct/100;
    let saldo = inicial;
    for (let m=1; m<=meses; m++){
      saldo = saldo * (1+i) + aporte;
    }
    return saldo;
  }

  function calc(){
    const inicial = toNumberBR(inicialEl.value);
    const aporte = toNumberBR(aporteEl.value);
    const taxaA = toNumberBR(taxaAEl.value);
    const taxaB = toNumberBR(taxaBEl.value);
    const meses = clamp(Math.round(toNumberBR(mesesEl.value)), 1, 600);

    if (![inicial, aporte, taxaA, taxaB, meses].every(Number.isFinite)){
      out.innerHTML = `<div class="big">—</div><div class="sub">Preencha tudo com números válidos.</div>`;
      return;
    }

    const a = simular(inicial, aporte, taxaA, meses);
    const b = simular(inicial, aporte, taxaB, meses);
    const diff = a - b;

    const winner = diff >= 0 ? "Opção A" : "Opção B";
    out.innerHTML = `
      <div class="big">${winner} vence por ${formatBRL(Math.abs(diff))}</div>
      <div class="sub">
        Saldo A: <b>${formatBRL(a)}</b><br/>
        Saldo B: <b>${formatBRL(b)}</b><br/>
        Período: <b>${meses}</b> meses | Aporte: <b>${formatBRL(aporte)}</b>
      </div>
    `;
  }

  $("#form").addEventListener("submit", (e)=>{ e.preventDefault(); calc(); });
  $("#reset").addEventListener("click", ()=>{
    inicialEl.value="2000"; aporteEl.value="300"; taxaAEl.value="1"; taxaBEl.value="0,8"; mesesEl.value="24";
    calc();
  });
  calc();
</script>
</body>
</html>
